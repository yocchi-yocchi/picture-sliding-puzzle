<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 14.0px 'Hiragino Mincho ProN'; color: #000000; -webkit-text-stroke: #000000}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; text-indent: 28.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000}
    span.s1 {font-kerning: none}
    span.s2 {font: 14.0px 'Hiragino Mincho ProN'; font-kerning: none}
    span.s3 {font: 14.0px 'Apple Color Emoji'; font-kerning: none}
    span.s4 {font: 14.0px Times; font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="ja"&gt;</span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1">  &lt;meta charset="UTF-8"&gt;</span></p>
<p class="p1"><span class="s1">  &lt;title&gt;</span><span class="s2">スライドパズル</span><span class="s1">&lt;/title&gt;</span></p>
<p class="p1"><span class="s1">  &lt;style&gt;</span></p>
<p class="p1"><span class="s1">    body {</span></p>
<p class="p1"><span class="s1">      font-family: "Arial", sans-serif;</span></p>
<p class="p1"><span class="s1">      display: flex;</span></p>
<p class="p1"><span class="s1">      flex-direction: column;</span></p>
<p class="p1"><span class="s1">      align-items: center;</span></p>
<p class="p1"><span class="s1">      background: #222;</span></p>
<p class="p1"><span class="s1">      color: white;</span></p>
<p class="p1"><span class="s1">      margin: 0;</span></p>
<p class="p1"><span class="s1">      padding: 20px;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    h1 {</span></p>
<p class="p1"><span class="s1">      margin-bottom: 10px;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    #controls {</span></p>
<p class="p1"><span class="s1">      margin: 10px;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    #puzzle {</span></p>
<p class="p1"><span class="s1">      display: grid;</span></p>
<p class="p1"><span class="s1">      gap: 2px;</span></p>
<p class="p1"><span class="s1">      margin: 20px 0;</span></p>
<p class="p1"><span class="s1">      background: #444;</span></p>
<p class="p1"><span class="s1">      border: 4px solid #666;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    .tile {</span></p>
<p class="p1"><span class="s1">      background-image: url("https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjPjrLhRe69TZJjGiwaB_qEfk3SLDKTVlDV2yr_vVgZ75tMWx0qa3dV2fHa36hAO-NBfHzs-QzYsQxECl0zTcnQGfgYyPTtd1sXHMEJoMBUF4oSEcC5uJJgfQkOe4hgs7c0aH_QhyphenhyphenpPtrw2MkPBG3FiMkmspkPV77nb-1cmoznS95TUemSiOdYK1-7BJX6i/s1024/Copilot_20250825_095216.png");</span></p>
<p class="p1"><span class="s1">      background-size: cover;</span></p>
<p class="p1"><span class="s1">      cursor: pointer;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    .empty {</span></p>
<p class="p1"><span class="s1">      background: #222;</span></p>
<p class="p1"><span class="s1">      cursor: default;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    #status {</span></p>
<p class="p1"><span class="s1">      margin-top: 10px;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    button {</span></p>
<p class="p1"><span class="s1">      margin: 0 5px;</span></p>
<p class="p1"><span class="s1">      padding: 6px 12px;</span></p>
<p class="p1"><span class="s1">      border: none;</span></p>
<p class="p1"><span class="s1">      border-radius: 6px;</span></p>
<p class="p1"><span class="s1">      background: #ff9800;</span></p>
<p class="p1"><span class="s1">      color: white;</span></p>
<p class="p1"><span class="s1">      cursor: pointer;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    button:hover {</span></p>
<p class="p1"><span class="s1">      background: #e68900;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    select {</span></p>
<p class="p1"><span class="s1">      padding: 4px;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">  &lt;/style&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p1"><span class="s1">&lt;body&gt;</span></p>
<p class="p1"><span class="s1">  &lt;h1&gt;</span><span class="s2">スライドパズル </span><span class="s3">👻</span><span class="s1">&lt;/h1&gt;</span></p>
<p class="p1"><span class="s1">  &lt;div id="controls"&gt;</span></p>
<p class="p1"><span class="s1">    &lt;label&gt;</span><span class="s2">難易度：</span></p>
<p class="p1"><span class="s1">      &lt;select id="sizeSelect"&gt;</span></p>
<p class="p1"><span class="s1">        &lt;option value="3"&gt;3×3&lt;/option&gt;</span></p>
<p class="p1"><span class="s1">        &lt;option value="4"&gt;4×4&lt;/option&gt;</span></p>
<p class="p1"><span class="s1">        &lt;option value="5"&gt;5×5&lt;/option&gt;</span></p>
<p class="p1"><span class="s1">      &lt;/select&gt;</span></p>
<p class="p1"><span class="s1">    &lt;/label&gt;</span></p>
<p class="p1"><span class="s1">    &lt;button onclick="startGame()"&gt;</span><span class="s2">リセット</span><span class="s1">&lt;/button&gt;</span></p>
<p class="p1"><span class="s1">  &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">  &lt;div id="puzzle"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">  &lt;div id="status"&gt;</span></p>
<p class="p1"><span class="s1">    &lt;p&gt;</span><span class="s3">⏱</span><span class="s1"> </span><span class="s2">タイム</span><span class="s1">: &lt;span id="timer"&gt;0&lt;/span&gt; </span><span class="s2">秒</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p1"><span class="s1">    &lt;p&gt;</span><span class="s3">🌀</span><span class="s1"> </span><span class="s2">手数</span><span class="s1">: &lt;span id="moves"&gt;0&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s1">    &lt;p id="message"&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s1">  &lt;/div&gt;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">  &lt;script&gt;</span></p>
<p class="p1"><span class="s1">    let size = 3;</span></p>
<p class="p1"><span class="s1">    let tiles = [];</span></p>
<p class="p1"><span class="s1">    let emptyIndex;</span></p>
<p class="p1"><span class="s1">    let timer = 0;</span></p>
<p class="p1"><span class="s1">    let moves = 0;</span></p>
<p class="p1"><span class="s1">    let timerInterval;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    const puzzle = document.getElementById("puzzle");</span></p>
<p class="p1"><span class="s1">    const timerEl = document.getElementById("timer");</span></p>
<p class="p1"><span class="s1">    const movesEl = document.getElementById("moves");</span></p>
<p class="p1"><span class="s1">    const messageEl = document.getElementById("message");</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    document.getElementById("sizeSelect").addEventListener("change", (e) =&gt; {</span></p>
<p class="p1"><span class="s1">      size = parseInt(e.target.value);</span></p>
<p class="p1"><span class="s1">      startGame();</span></p>
<p class="p1"><span class="s1">    });</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    function startGame() {</span></p>
<p class="p1"><span class="s1">      clearInterval(timerInterval);</span></p>
<p class="p1"><span class="s1">      timer = 0;</span></p>
<p class="p1"><span class="s1">      moves = 0;</span></p>
<p class="p1"><span class="s1">      timerEl.textContent = "0";</span></p>
<p class="p1"><span class="s1">      movesEl.textContent = "0";</span></p>
<p class="p1"><span class="s1">      messageEl.textContent = "";</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">      puzzle.style.gridTemplateColumns = `repeat(${size}, 100px)`;</span></p>
<p class="p1"><span class="s1">      puzzle.style.gridTemplateRows = `repeat(${size}, 100px)`;</span></p>
<p class="p1"><span class="s1">      puzzle.style.width = `${size * 100}px`;</span></p>
<p class="p1"><span class="s1">      puzzle.style.height = `${size * 100}px`;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">      tiles = [];</span></p>
<p class="p1"><span class="s1">      for (let i = 0; i &lt; size * size; i++) {</span></p>
<p class="p1"><span class="s1">        tiles.push(i);</span></p>
<p class="p1"><span class="s1">      }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">      // </span><span class="s2">シャッフル</span></p>
<p class="p1"><span class="s1">      tiles = shuffleArray(tiles);</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">      // </span><span class="s2">最後を空白に</span></p>
<p class="p1"><span class="s1">      emptyIndex = tiles.indexOf(size * size - 1);</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">      render();</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">      timerInterval = setInterval(() =&gt; {</span></p>
<p class="p1"><span class="s1">        timer++;</span></p>
<p class="p1"><span class="s1">        timerEl.textContent = timer;</span></p>
<p class="p1"><span class="s1">      }, 1000);</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    function render() {</span></p>
<p class="p1"><span class="s1">      puzzle.innerHTML = "";</span></p>
<p class="p1"><span class="s1">      tiles.forEach((n, i) =&gt; {</span></p>
<p class="p1"><span class="s1">        const div = document.createElement("div");</span></p>
<p class="p1"><span class="s1">        div.classList.add("tile");</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p2"><span class="s4">        // </span><span class="s1">タイルの表示サイズ（既存の設計に合わせて</span><span class="s4">100px</span><span class="s1">）</span></p>
<p class="p1"><span class="s1">        div.style.width = "100px";</span></p>
<p class="p1"><span class="s1">        div.style.height = "100px";</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p2"><span class="s4">        // ▼▼▼ </span><span class="s1">ここを追加（パズル全体の大きさ＝</span><span class="s4"> size*100 px </span><span class="s1">に背景画像を拡大・縮小）</span></p>
<p class="p1"><span class="s1">        div.style.backgroundSize = `${size * 100}px ${size * 100}px`;</span></p>
<p class="p1"><span class="s1">        // ▲▲▲ </span><span class="s2">ここまで追加</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">        if (n === size * size - 1) {</span></p>
<p class="p1"><span class="s1">          // </span><span class="s2">空白タイル</span></p>
<p class="p1"><span class="s1">          div.classList.add("empty");</span></p>
<p class="p1"><span class="s1">        } else {</span></p>
<p class="p2"><span class="s4">          // </span><span class="s1">画像の切り出し位置を決める</span></p>
<p class="p1"><span class="s1">          const row = Math.floor(n / size);</span></p>
<p class="p1"><span class="s1">          const col = n % size;</span></p>
<p class="p1"><span class="s1">          div.style.backgroundPosition = `${-col * 100}px ${-row * 100}px`;</span></p>
<p class="p1"><span class="s1">        }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">        div.addEventListener("click", () =&gt; moveTile(i));</span></p>
<p class="p1"><span class="s1">        puzzle.appendChild(div);</span></p>
<p class="p1"><span class="s1">      });</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    function moveTile(index) {</span></p>
<p class="p1"><span class="s1">      const emptyRow = Math.floor(emptyIndex / size);</span></p>
<p class="p1"><span class="s1">      const emptyCol = emptyIndex % size;</span></p>
<p class="p1"><span class="s1">      const tileRow = Math.floor(index / size);</span></p>
<p class="p1"><span class="s1">      const tileCol = index % size;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">      if (</span></p>
<p class="p1"><span class="s1">        (tileRow === emptyRow &amp;&amp; Math.abs(tileCol - emptyCol) === 1) ||</span></p>
<p class="p1"><span class="s1">        (tileCol === emptyCol &amp;&amp; Math.abs(tileRow - emptyRow) === 1)</span></p>
<p class="p1"><span class="s1">      ) {</span></p>
<p class="p1"><span class="s1">        [tiles[emptyIndex], tiles[index]] = [tiles[index], tiles[emptyIndex]];</span></p>
<p class="p1"><span class="s1">        emptyIndex = index;</span></p>
<p class="p1"><span class="s1">        moves++;</span></p>
<p class="p1"><span class="s1">        movesEl.textContent = moves;</span></p>
<p class="p1"><span class="s1">        render();</span></p>
<p class="p1"><span class="s1">        checkWin();</span></p>
<p class="p1"><span class="s1">      }</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p3"><span class="s1">function checkWin() {</span></p>
<p class="p1"><span class="s1">      for (let i = 0; i &lt; tiles.length; i++) {</span></p>
<p class="p1"><span class="s1">        if (tiles[i] !== i) return false;</span></p>
<p class="p1"><span class="s1">      }</span></p>
<p class="p1"><span class="s1">      clearInterval(timerInterval);</span></p>
<p class="p1"><span class="s1">      messageEl.textContent = "</span><span class="s3">🎉</span><span class="s1"> </span><span class="s2">クリア！</span><span class="s1">";</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p2"><span class="s4">      // ▼▼▼ </span><span class="s1">ここを追加：空白タイルも元の画像で埋める</span><span class="s4"> ▼▼▼</span></p>
<p class="p1"><span class="s1">      const lastTile = puzzle.lastChild; // </span><span class="s2">最後のタイル（空白）</span></p>
<p class="p1"><span class="s1">      lastTile.classList.remove("empty");</span></p>
<p class="p1"><span class="s1">      lastTile.style.backgroundImage = 'url("https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjPjrLhRe69TZJjGiwaB_qEfk3SLDKTVlDV2yr_vVgZ75tMWx0qa3dV2fHa36hAO-NBfHzs-QzYsQxECl0zTcnQGfgYyPTtd1sXHMEJoMBUF4oSEcC5uJJgfQkOe4hgs7c0aH_QhyphenhyphenpPtrw2MkPBG3FiMkmspkPV77nb-1cmoznS95TUemSiOdYK1-7BJX6i/s1024/Copilot_20250825_095216.png")';</span></p>
<p class="p1"><span class="s1">      lastTile.style.backgroundSize = `${size * 100}px ${size * 100}px`;</span></p>
<p class="p1"><span class="s1">      lastTile.style.backgroundPosition = `${-(size - 1) * 100}px ${-(size - 1) * 100}px`;</span></p>
<p class="p1"><span class="s1">      // ▲▲▲ </span><span class="s2">ここまで追加</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">      return true;</span></p>
<p class="p3"><span class="s1">}</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    function shuffleArray(array) {</span></p>
<p class="p1"><span class="s1">      let shuffled = array.slice();</span></p>
<p class="p1"><span class="s1">      for (let i = shuffled.length - 1; i &gt; 0; i--) {</span></p>
<p class="p1"><span class="s1">        const j = Math.floor(Math.random() * (i + 1));</span></p>
<p class="p1"><span class="s1">        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];</span></p>
<p class="p1"><span class="s1">      }</span></p>
<p class="p1"><span class="s1">      return shuffled;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    startGame();</span></p>
<p class="p1"><span class="s1">  &lt;/script&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
